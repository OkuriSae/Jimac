<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>歌枠字幕ジェネレータ</title>
  <script src="https://unpkg.com/vue@next"></script>
  <script
    src="https://code.jquery.com/jquery-3.6.0.min.js"
    integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4="
    crossorigin="anonymous"></script>
  <script src="https://kit.fontawesome.com/55dea25b7a.js" crossorigin="anonymous"></script>
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma-extensions@4.0.0/dist/css/bulma-extensions.min.css">
  <script src="https://cdn.jsdelivr.net/npm/bulma-extensions@4.0.0/dist/js/bulma-extensions.min.js"></script>

</head>

<body>
  <h1 class="title">歌枠字幕ジェネレーター</h1>

  <section>
    <div id="jimakuGenerator" class="container" >
      <div class="columns is-mobile"  >

        <!-- Repertory -->
        <div class="column sidebar">
          
          <div class="repertory" style="margin: 5px;">
            <div class="card">
              <div class="card-content">
                <div class="content">
                  Lemon / 米津玄師
                </div>
              </div>
            </div>

            <div class="card">
              <div class="card-content">
                <div class="content">
                  Lemon / 米津玄師
                </div>
              </div>
            </div>
          </div>

        </div>
        
        <div class="column content">
          <div style="width:100%;">

            <div class="button lylic-area" v-bind:style="{backgroundColor: backColor}">
              <component is="style">
                .lylic-style{
                  color: {{ textColor }};
                  font-size: {{ fontSize }};
                  font-family: {{ fontFamily }};
                }
                .lylic-style.before{
                  color: {{ textColor }};
                }
              </component>
              <div id="lylic-test-before" v-bind:data-text="currentLylic">
                <span 
                  v-for="(t, index) in currentLylic" 
                  :key="index" 
                  class="item" 
                  :style="{animationDelay: index*100+'ms'}">
                  {{ t === ' ' ? '\xa0' : t }}
                </span>
              </div>
              
              <div id="lylic-test-main" v-bind:data-text="currentLylic">
                <span 
                  v-for="(t, index) in currentLylic" 
                  :key="index" 
                  class="item" 
                  :style="{animationDelay: index*100+'ms'}">
                  {{ t === ' ' ? '\xa0' : t }}
                </span>
              </div>
              
              <div id="lylic-test-after" v-bind:data-text="currentLylic">
                <component v-if="textAnim" is="style">
                  @keyframes text-in {
                    0% {
                      transform: translate(0, -20px);
                      opacity: 0;
                    }
                  }
                  .item {
                    display: inline-block;
                    animation: text-in .8s cubic-bezier(0.22, 0.15, 0.25, 1.43) 0s backwards;
                  }
                </component>
                <span 
                  v-for="(t, index) in currentLylic" 
                  :key="index" 
                  class="item" 
                  :style="{animationDelay: index*100+'ms'}">
                  {{ t === ' ' ? '\xa0' : t }}
                </span>
              </div>
            </div>

            <div id="controller">

              <!-- LylicIndex -->
              <div class="button" @click="moveIndex(-1000)"><i class="fas fa-angle-double-left"></i></div>
              <div class="button" @click="moveIndex(-1)"><i class="fas fa-angle-left"></i></div>
              <div class="button" style="width:44px; background-color: rgb(255,255,255,0.5);">{{index}}</div>
              <div class="button" @click="moveIndex(+1)"><i class="fas fa-angle-right"></i></div>

              <!-- BackColor -->
              <div class="button" style="border: none; background-color: transparent; padding-left: 15px; padding-right: 4px;">Back:</div>
              <input class="input" style="width:44px;" type="color" v-model="backColor" placeholder="#BackColor">
              
              <!-- TextColor -->
              <div class="button" style="border: none; background-color: transparent; padding-left: 15px; padding-right: 4px;">Text:</div>
              <input class="input" style="width:44px;" type="color" v-model="textColor" placeholder="#TextColor">
              
              <!-- FontFamily -->
              <div class="button" style="border: none; background-color: transparent; padding-left: 15px; padding-right: 4px;">Font:</div>
              <div class="select">
                <select name="fontFamily" style="width:170px;" v-model="fontFamily">
                  <option value="'Kiwi Maru', serif">Kiwi Maru</option>
                  <option value="'Yusei Magic', sans-serif">Yusei Magic</option>
                  <option value="'Hachi Maru Pop', cursive">Hachi Maru Pop</option>
                  <option value="'Kaisei Tokumin', serif">Kaisei Tokumin</option>
                  <option value="'DotGothic16', sans-serif">DotGothic16</option>
                </select>
              </div>

              <!-- FontSize -->
              <div class="button" style="border: none; background-color: transparent; padding-left: 15px; padding-right: 4px;">Size:</div>
              <input class="input" style="width:60px;" type="text" v-model="fontSize">

              <!-- Animation -->
              <div class="field" style="display: inline;">
                <input id="switchRtlExample" v-model="textAnim" type="checkbox" name="switchRtlExample" class="switch is-rtl" checked="checked">
                <label for="switchRtlExample" style="padding-left: 15px; padding-right: 53px; top: 8px;">Anim:</label>
              </div>
            </div>

            <!-- LylicsEditor -->
            <div class="paper">
              <div class="paper-content">
                  <textarea 
                    autofocus
                    contenteditable 
                    v-model="lylics" 
                    @input="changeLylics" 
                    placeholder=
"曲名 / アーティスト

ここに歌詞を貼り付けます"></textarea>
              </div>
            </div>
            
          </div>
        </div>
      </div>
    </div>
  </section>


  <script src="script.js"></script>
</body>
</html>